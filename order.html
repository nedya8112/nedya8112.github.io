---
layout: page
title: 網上點餐模擬器
subtitle: 重現原本 C 程式的落單流程
permalink: /order
full-width: true
---

<div class="order-wrapper my-4">
  <div class="row">
    <div class="col-lg-8 mb-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-3">
            <div>
              <h3 class="mb-1">嗨你係落單嘅第 <span id="orderNumber" class="font-weight-bold text-primary">...</span> 條友</h3>
              <p class="text-muted mb-0">逐步填寫，完全跟足原本 CLI 版流程（可以隨時返回修改）。</p>
            </div>
            <button class="btn btn-outline-secondary mt-3 mt-md-0" id="resetOrder">重設表單</button>
          </div>

          <div class="order-steps d-flex flex-wrap mb-3" id="stepIndicators">
            <div class="step-indicator active" data-step-indicator="1">1. 名字</div>
            <div class="step-indicator" data-step-indicator="2">2. 主食 / 湯底</div>
            <div class="step-indicator" data-step-indicator="3">3. 配菜</div>
            <div class="step-indicator" data-step-indicator="4">4. 備註 & 確認</div>
          </div>

          <div class="alert alert-info small" role="status">
            本頁不會傳送資料到伺服器，所有紀錄都儲存在你的瀏覽器（localStorage）內，並模擬
            <code>output.txt</code> 的累計寫入效果。
          </div>

          <div id="validationMessage" class="alert alert-danger d-none" role="alert"></div>

          <section class="order-step" data-step="1">
            <h4 class="mb-3">名？^^</h4>
            <div class="form-group">
              <label for="nameInput" class="font-weight-semibold">稱呼</label>
              <input type="text" id="nameInput" class="form-control" placeholder="例如：阿華" autocomplete="off">
              <small class="form-text text-muted">會跟 CLI 版一樣記錄在訂單前綴。</small>
            </div>
            <div class="d-flex justify-content-end">
              <button class="btn btn-primary" data-next>下一步</button>
            </div>
          </section>

          <section class="order-step d-none" data-step="2">
            <h4 class="mb-3">想食啲咩？^^</h4>
            <div id="foodOptions" class="options-grid"></div>

            <div id="stockSection" class="mt-4 d-none">
              <h5 class="mb-2">咩湯底？^^</h5>
              <p class="text-muted small mb-3">主食選擇 1-3 時需要湯底，否則自動隱藏。</p>
              <div id="stockOptions" class="options-grid"></div>
            </div>

            <div class="d-flex justify-content-between mt-3">
              <button class="btn btn-link" data-prev>返回</button>
              <button class="btn btn-primary" data-next>下一步</button>
            </div>
          </section>

          <section class="order-step d-none" data-step="3">
            <h4 class="mb-2">打低三個餸吧^^</h4>
            <p class="text-muted small mb-3">
              每款限選一次，最少 3 款，最多 6 款。（加餸每款 +$8，加雞髀 +$20）
            </p>
            <div id="sideOptions" class="options-grid options-grid-3"></div>
            <div class="d-flex justify-content-between mt-3">
              <button class="btn btn-link" data-prev>返回</button>
              <button class="btn btn-primary" data-next>下一步</button>
            </div>
          </section>

          <section class="order-step d-none" data-step="4">
            <h4 class="mb-3">有冇咩特別要求？^^</h4>
            <div class="form-group">
              <label for="remarksInput" class="font-weight-semibold">備註</label>
              <textarea id="remarksInput" class="form-control" rows="2" placeholder="加底、走青、甜汁少啲..."></textarea>
              <small class="form-text text-muted">打「0」等同沒有特別要求；可隨時返回上一個步驟。</small>
            </div>
            <div class="d-flex justify-content-between align-items-center mt-3">
              <button class="btn btn-link" data-prev>返回</button>
              <div>
                <button class="btn btn-outline-secondary mr-2" id="editSides">再揀過餸</button>
                <button class="btn btn-primary" id="confirmOrder">確認落單</button>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="card-title">覆單</h5>
          <p class="text-muted small mb-2">隨時跟進你的選項，確認前可以修改任何一步。</p>
          <ul class="list-unstyled mb-2">
            <li><strong>名字：</strong><span id="summaryName">—</span></li>
            <li><strong>主食：</strong><span id="summaryFood">—</span></li>
            <li><strong>湯底：</strong><span id="summaryStock">—</span></li>
            <li><strong>配菜：</strong><span id="summarySides">—</span></li>
            <li><strong>備註：</strong><span id="summaryRemarks">—</span></li>
          </ul>
          <div id="confirmationHint" class="alert alert-secondary small mb-0" role="status">
            完成每一步後，按「確認落單」會將訂單寫入瀏覽器的模擬 <code>output.txt</code>。
          </div>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">歷史訂單 (瀏覽器本地)</h5>
          <div id="historyIntro" class="text-muted small mb-2">暫時未有任何紀錄。</div>
          <div id="orderHistory" class="history-list small"></div>
          <div class="d-flex justify-content-between align-items-center mt-3">
            <button class="btn btn-sm btn-outline-secondary" id="refreshHistory">重新整理</button>
            <button class="btn btn-sm btn-outline-danger" id="clearHistory">清除所有紀錄</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.order-steps .step-indicator {
  padding: 0.5rem 0.75rem;
  border-radius: 0.75rem;
  background: #f3f4f6;
  color: #6c757d;
  margin-right: 0.5rem;
  margin-bottom: 0.5rem;
  font-weight: 600;
  font-size: 0.95rem;
}
.order-steps .step-indicator.active {
  background: #007bff;
  color: #fff;
}
.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 0.75rem;
}
.options-grid-3 {
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}
.option-tile {
  border: 1px solid #e5e7eb;
  border-radius: 0.75rem;
  padding: 0.75rem;
  transition: all 0.2s ease;
  background: #fff;
}
.option-tile:hover {
  border-color: #007bff;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
}
.option-tile input {
  margin-right: 0.4rem;
}
.history-list {
  max-height: 340px;
  overflow-y: auto;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  padding: 0.75rem;
  background: #fafafa;
}
.history-item {
  border-bottom: 1px dashed #e2e8f0;
  padding: 0.35rem 0;
}
.history-item:last-child {
  border-bottom: none;
}
</style>

<script src="{{ '/assets/js/order.js' | relative_url }}"></script>

